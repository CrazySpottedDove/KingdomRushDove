local i18n = require("i18n")

local endless = {
    friend_buff = {
        health_factor = 1.15,
        s_health_factor = 15,
        soldier_damage_factor = 1.07,
        s_soldier_damage_factor = 7,
        tower_damage_factor = 0.05,
        s_tower_damage_factor = 5,
        soldier_cooldown_factor = 0.95,
        s_soldier_cooldown_factor = 5,
        tower_cooldown_factor = 0.95,
        s_tower_cooldown_factor = 5,
        hero_damage_factor = 1.1,
        s_hero_damage_factor = 10,
        hero_cooldown_factor = 0.9,
        s_hero_cooldown_factor = 10,
        archer_bleed = 0.1,
        archer_insight = 0.01,
        archer_critical = 0.1,
        rain_count_inc = 2,
        rain_damage_inc = 60,
        rain_radius_mul = 1.25,
        rain_cooldown_dec = 10,
        rain_scorch_damage_true = 15,
        more_gold = 0.15,
        barrack_unity_lifetime = 2,
        barrack_unity_count = 1,
        barrack_luck = 0.1,
        barrack_synergy = 0.01,
        engineer_focus = 0.8,
        engineer_aftermath = 20,
        engineer_seek = 0.25,
        engineer_fireball = 1,
    },
    enemy_buff = {
        health_factor = 1.06,
        s_health_factor = 6,
        damage_factor = 1.1,
        s_damage_factor = 10,
        speed_factor = 1.03,
        s_speed_factor = 3,
        health_damage_factor = 0.95,
        s_health_damage_factor = 5,
        lives_cost_factor = 1.07,
        s_lives_cost_factor = 7,
        wave_interval_factor = 0.97
    },
    template = {
        enemy_list = {},
        total_lives_cost = 0,
        enemy_health_factor = 1,
        enemy_damage_factor = 1,
        enemy_speed_factor = 1,
        enemy_health_damage_factor = 1,
        enemy_gold_factor = 1,
        soldier_health_factor = 1,
        soldier_damage_factor = 1,
        tower_damage_factor = 1,
        soldier_cooldown_factor = 1,
        tower_cooldown_factor = 1,
        hero_damage_factor = 1,
        hero_cooldown_factor = 1,
        interval = 150,
        available_paths = {},
        avg_interval = 0,
        avg_interval_next = 0,
        extra_cash = 0,
        spawn_count_per_wave = 0,
        lives_cost_per_wave = 0,
        load_from_history = false,
        upgrade_levels = {},
        enemy_upgrade_levels = {}
    },
    upgrade_max_levels = {
        health = 25,
        soldier_damage = 25,
        soldier_cooldown = 5,
        tower_damage = 25,
        tower_cooldown = 5,
        hero_damage = 25,
        hero_cooldown = 4,
        archer_bleed = 5,
        archer_multishot = 2,
        archer_insight = 3,
        archer_critical = 4,
        rain_count_inc = 4,
        rain_damage_inc = 5,
        rain_radius_mul = 1,
        rain_cooldown_dec = 2,
        rain_scorch_damage_true = 1,
        more_gold = 1,
        barrack_rally = 1,
        barrack_unity = 1,
        barrack_luck = 3,
        barrack_synergy = 5,
        engineer_focus = 3,
        engineer_aftermath = 5,
        engineer_seek = 1,
        engineer_fireball = 2,
        ban_rain = 1,
        ban_archer = 1,
        ban_engineer = 1,
        ban_barrack = 1,
    },
    force_upgrade_max_levels = {
        archer_critical = 10,
        rain_radius_mul = 1,
        rain_scorch_damage_true = 1,
        rain_cooldown_dec = 2,
        barrack_rally = 1,
        barrack_unity = 1,
        barrack_luck = 3,
        engineer_seek = 1,
        engineer_fireball = 2,
        ban_rain = 1,
        ban_archer = 1,
        ban_engineer = 1,
        ban_barrack = 1
    },
    enemy_upgrade_max_levels = {
        health = 55,
        damage = 50,
        speed = 20,
        health_damage_factor = 20,
        lives = 45,
        wave_interval = 45
    },
    gold_extra_upgrade = {"archer_bleed", "archer_multishot", "archer_insight", "rain_count_inc", "rain_damage_inc",
                          "more_gold", "barrack_synergy", "engineer_focus", "engineer_aftermath","archer_critical","rain_radius_mul",
                          "rain_scorch_damage_true","barrack_rally","barrack_unity","engineer_seek","engineer_fireball","ban_rain","ban_archer","ban_engineer","ban_barrack","rain_cooldown_dec","barrack_luck", "health","tower_damage","hero_damage"},
    gold_extra_cost = 10000,
    rain = {"rain_radius_mul","rain_scorch_damage_true","rain_cooldown_dec","rain_count_inc","rain_damage_inc"},
    archer = {"archer_bleed","archer_multishot","archer_insight","archer_critical"},
    barrack = {"barrack_synergy","barrack_unity","barrack_rally","barrack_luck"},
    engineer = {"engineer_focus","engineer_aftermath","engineer_seek","engineer_fireball"}
}

for k, _ in pairs(endless.upgrade_max_levels) do
    endless.template.upgrade_levels[k] = 0
end

for k, _ in pairs(endless.enemy_upgrade_max_levels) do
    endless.template.enemy_upgrade_levels[k] = 0
end

local key_label_map = {
    health = "坚韧",
    soldier_damage = "力量",
    soldier_cooldown = "训练有素",
    tower_damage = "火力提升",
    tower_cooldown = "快速装填",
    hero_damage = "英雄之力",
    hero_cooldown = "英雄熟练",
    archer_bleed = "流血专精",
    archer_multishot = "多重射击",
    archer_insight = "洞察",
    archer_critical = "致命一击",
    rain_count_inc = "流星号角",
    rain_damage_inc = "猛烈灾劫",
    rain_radius_mul = "巨星陨落",
    rain_cooldown_dec = "狂热节奏",
    rain_scorch_damage_true = "末日焦土",
    more_gold = "点石成金",
    barrack_rally = "战术调集",
    barrack_unity = "众志成城",
    barrack_luck = "死神对弈",
    barrack_synergy = "战术协同",
    engineer_focus = "聚能爆破",
    engineer_aftermath = "动能余波",
    engineer_seek = "准心校正",
    engineer_fireball = "燃焰前奏",
    ban_rain = "禁绝·火雨",
    ban_archer = "禁绝·箭塔",
    ban_engineer = "禁绝·炮塔",
    ban_barrack = "禁绝·兵营"
}

local key_desc_map = {
    health = string.format("友方单位生命值提升%d%%", endless.friend_buff.s_health_factor),
    soldier_damage = string.format("友方士兵伤害提升%d%%", endless.friend_buff.s_soldier_damage_factor),
    soldier_cooldown = string.format("友方士兵攻速提升%d%%", endless.friend_buff.s_soldier_cooldown_factor),
    tower_damage = string.format("防御塔伤害增加%d%%", endless.friend_buff.s_tower_damage_factor),
    tower_cooldown = string.format("防御塔攻速提升%d%%", endless.friend_buff.s_tower_cooldown_factor),
    hero_damage = string.format("英雄伤害提升%d%%", endless.friend_buff.s_hero_damage_factor),
    hero_cooldown = string.format("英雄攻速提升%d%%", endless.friend_buff.s_hero_cooldown_factor),
    archer_bleed = string.format("弓箭塔的流血伤害提升%d%%", endless.friend_buff.archer_bleed * 1000),
    archer_multishot = string.format("弓箭塔普攻额外发射一支箭矢"),
    archer_insight = string.format("弓箭命中敌人额外提升敌人易伤%d%%",
        endless.friend_buff.archer_insight * 100),
    archer_critical = string.format("提升弓箭的暴击率%d%%", endless.friend_buff.archer_critical * 100),
    rain_count_inc = string.format("火雨数量提升%d颗", endless.friend_buff.rain_count_inc),
    rain_damage_inc = string.format("火雨伤害提升%d点，焦土伤害提升%d点",
        endless.friend_buff.rain_damage_inc, endless.friend_buff.rain_damage_inc * 0.1),
    rain_radius_mul = string.format("火雨范围提升%d%%", (endless.friend_buff.rain_radius_mul - 1) * 100),
    rain_cooldown_dec = string.format("火雨冷却时间减少%d秒", endless.friend_buff.rain_cooldown_dec),
    rain_scorch_damage_true = string.format("焦土伤害提升%d点，且造成真实伤害",
        endless.friend_buff.rain_scorch_damage_true),
    more_gold = string.format("提升金币收益%d%%", endless.friend_buff.more_gold * 100),
    barrack_rally = "取消兵营的调集范围限制",
    barrack_unity = string.format("士兵复活速度加快%d秒，且兵营士兵容量+%d",
        endless.friend_buff.barrack_unity_lifetime, endless.friend_buff.barrack_unity_count),
    barrack_luck = string.format("士兵在受到攻击时有额外%d概率闪避伤害",
        endless.friend_buff.barrack_luck * 100),
    barrack_synergy = string.format("每一个士兵为周围的防御塔提供%d%%伤害加成",
        endless.friend_buff.barrack_synergy * 100),
    engineer_focus = string.format("火炮对中心敌人额外造成%d%%伤害，闪电与导弹伤害提升%d%%",
        endless.friend_buff.engineer_focus * 100, endless.friend_buff.engineer_focus * 100 * 0.8),
    engineer_aftermath = string.format(
        "火炮/闪电附带震荡，对附近敌人额外造成%d/15点爆炸/雷电伤害",
        endless.friend_buff.engineer_aftermath),
    engineer_seek = string.format("使炮塔主动对空，电塔攻击范围提升%d%%",
        endless.friend_buff.engineer_seek * 100),
    engineer_fireball = string.format("每次炮弹/雷电攻击额外减少火雨%.2f秒冷却",
        endless.friend_buff.engineer_fireball / 30),
    ban_rain = "不再出现火雨科技",
    ban_archer = "不再出现箭塔科技",
    ban_engineer = "不再出现炮塔科技",
    ban_barrack = "不再出现兵营科技"
}
endless.key_label_map = key_label_map
endless.key_desc_map = key_desc_map

return endless
